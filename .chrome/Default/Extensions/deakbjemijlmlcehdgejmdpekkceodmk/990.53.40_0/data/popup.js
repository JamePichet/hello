function G_cp_a(){}function G_cp_b(){G_cp_c("add_on_message_listener - empty implementation")}function G_cp_d(){G_cp_c("send_message - empty implementation")}function G_cp_e(){G_cp_c("set_log_level - empty implementation")}function G_cp_(b){G_cp_c("get_locale_message - empty implementation");return b}function G_cp_f(){G_cp_c("browser - empty implementation");return""}var G_cp_g={profile:0,clean:1,pdf:2},G_cp_h;for(G_cp_h in G_cp_g)G_cp_g.hasOwnProperty(G_cp_h);
var G_cp_i={ie:0,chrome:1,firefox_legacy:2,firefox_quantum:3,edge:4,node:5},G_cp_c,G_cp_j=[];if("undefined"!==typeof window&&"undefined"===typeof browser){var browser;browser=window.a||window.browser||window.chrome}function G_cp_k(b){return function(c){try{b&&b(c),"string"!==typeof c&&(c=JSON.stringify(c,void 0,"\t")),G_cp_j.push({b:c,time:new Date}),5E3<G_cp_j.length&&G_cp_j.shift()}catch(d){console.log(d)}}}
function G_cp_l(b){switch(b){case "extracting":return G_cp_("LOCALE_SCANNING_FILE_FOR_THREATS");case "uploading":return G_cp_("LOCALE_SCANNING_FILE_FOR_THREATS");case "downloading":return G_cp_("LOCALE_DOWNLOADING_FILE");case "extracted_pdf":return G_cp_("LOCALE_FILE_WAS_CONVERTED_TO_PDF_TO_REMOVE_SECURITY_RISKS");case "extracted_cleaned":return G_cp_("LOCALE_POTENTIALLY_MALICIOUS_ELEMENTS_WERE_REMOVED_FROM_THIS_FILE")}return""}function G_cp_m(){return G_cp_f()===G_cp_i.chrome}
function G_cp_n(){return G_cp_f()===G_cp_i.firefox_quantum}function G_cp_o(){$(".locale_message").each(function(){$(this).html(G_cp_($(this).attr("data-locale-message-constnat")))})}G_cp_a=function(){G_cp_b=G_cp_p;G_cp_d=G_cp_q;G_cp_e=G_cp_r;G_cp_=G_cp_s;G_cp_f=G_cp_t};function G_cp_r(b){G_cp_c=G_cp_k(4<=b?console.debug.bind(console):void 0);3<=b&&console.info.bind(console);2<=b&&console.warn.bind(console);1<=b&&console.error.bind(console)}
function G_cp_s(b,c){var d=browser.i18n.getMessage(b,c);return d&&""!=d?d:b}function G_cp_p(b){browser.extension.onMessage.addListener(b)}function G_cp_q(b,c){browser.extension.sendMessage(b,c)}function G_cp_t(){return G_cp_i.chrome}G_cp_a();G_cp_e(4);G_cp_e(2);
$(document).ready(function(){$(document).keydown(function(b){1!=b.ctrlKey||"61"!=b.which&&"107"!=b.which&&"173"!=b.which&&"109"!=b.which&&"187"!=b.which&&"189"!=b.which||b.preventDefault()});$(window).bind("mousewheel DOMMouseScroll",function(b){1==b.ctrlKey&&b.preventDefault()})});var G_cp_u={},G_cp_v=[],G_cp_w=!1;(G_cp_m()||G_cp_n()||G_cp_f()===G_cp_i.edge)&&browser.runtime.connect({name:"TEX"});
function G_cp_x(b){if(void 0===b)b="";else{var c=b.lastIndexOf(".");b=-1===c?"":b.substr(c+1).toLowerCase()}return 0<=["pdf","fdf"].indexOf(b)?"acrobat.png":0<=["doc","dot","dotx","docx","rtf"].indexOf(b)?"word.png":0<=["docm","dotm"].indexOf(b)?"word_macro.png":0<="xlt xls xla xlw xltx xlsx xlsb csv xll".split(" ").indexOf(b)?"excel.png":0<=["xlm","xlam","xlsm","xltm"].indexOf(b)?"excel_macro.png":0<="ppt pptx pps ppsx pot potx ppa sldx sldm".split(" ").indexOf(b)?"PP.png":0<=["pptm","ppam","ppsm",
"potm"].indexOf(b)?"PP_macro.png":0<=["exe"].indexOf(b)?"exe.png":0<=["dll"].indexOf(b)?"dll.png":0<=["zip","rar","tar","cab","tgz"].indexOf(b)?"zip.png":0<=["jar"].indexOf(b)?"jar.png":0<=["scr"].indexOf(b)?"image.png":0<=["pif"].indexOf(b)?"pif.png":0<=["swf"].indexOf(b)?"swf.png":"generic_file.png"}
function G_cp_y(b){var c,d,e=b.file_name,g="icons/"+G_cp_x(e),n="";if(100==b.progress){c="show"!=b.orig_file_state&&"inactive_pending"!=b.orig_file_state||!b.orig_file_url?"active_pending"==b.orig_file_state?'<img class="flatNotifFileActionPart" src="icons/Spinner_1.gif" alt="Inspecting file" /><br><br>'+G_cp_("LOCALE_ORIGINAL_FILE_WILL_BE_DOWNLOADED_ONCE_FILE_INSPECTION_IS_COMPLETED"):"retry_enabled"==b.orig_file_state?'<a class="flatNotifFileActionLink" id="retry'+b.download_id+'">'+G_cp_("LOCALE_RETRY")+
"</a><br>":"blocked"==b.orig_file_state||"error"==b.orig_file_state?'<span class="flatNotifFileActionPart">'+G_cp_("error"==b.orig_file_state?"LOCALE_ERROR_GETTING_ORIGINAL_FILE":"LOCALE_ORIGINAL_FILE_WAS_BLOCKED")+'</span><img class="flatNotifFileActionError" src="icons/error.svg" alt="Error" /><br>':"warn"==b.orig_file_state?'<span class="flatNotifFileActionPart">'+["LOCALE_FILE_DOWNLOADED","LOCALE_FAILED_TO_INSPECT_FILE"].map(G_cp_).join("<br>")+'</span><img class="flatNotifFileActionError" src="icons/error.svg" alt="Error" /><br><br>':
"<br>":G_cp_w?"<br>":'<a class="flatNotifFileActionLink" id="orig'+b.download_id+'">'+G_cp_("LOCALE_GET_ORIGINAL")+"</a><br>";if("extracted_pdf"==b.tex_state||"extracted_cleaned"==b.tex_state)n='\t<div class="flatNotifShowMorePart">\t\t<a class="flatNotifShowMoreOrLessExpander" id="showMoreExpander'+b.download_id+'">'+G_cp_("LOCALE_SHOW_MORE")+'</a>\t\t<div class="hidden showMoreExpanderOpen" id="showMoreExpanderOpen'+b.download_id+'">\t\t\t<img id="moreInfoOrigFile'+b.download_id+'"class="flatNotifMoreInfoIcon" src="icons/'+
G_cp_x(b.orig_file_name)+'" alt="Old file" />\t\t\t<img class="flatNotifMoreInfoIcon flatNotifArrowIcon" src="icons/arrow.png" alt="" />\t\t\t<img id="moreInfoNewFile'+b.download_id+'"class="flatNotifMoreInfoIcon" src="icons/'+G_cp_x(b.file_name)+'" alt="New file" />\t\t\t<br>'+G_cp_l(b.tex_state)+'\t\t\t<br><a class="flatNotifShowMoreOrLessExpander" id="showLessExpander'+b.download_id+'">'+G_cp_("LOCALE_SHOW_LESS")+"</a>\t\t</div>\t</div>";e=b.download_id&&(G_cp_m()||G_cp_n())?'<a href="javascript:void(0);" id="open'+
b.download_id+'">'+b.file_name+"</a>":"<a>"+b.file_name+"</a>";d="hidden"}else d="occupy_all_row",c="",g="icons/Spinner_1.gif";var h=b.message?b.message:"";if("string"!=typeof h)for(var p=h,h="",q=p.length,f=0;f<q;f++)h+=G_cp_(p[f]);p=b.download_id?b.download_id:b.id;h=h.replace(/(?:\r\n|\r|\n)/g,"<br/>");q=b.progress;a:{var f=new Date(b.date),m=+f,t=[[60,G_cp_("LOCALE_SECONDS"),1],[120,G_cp_("LOCALE_1_MINUTE_AGO"),"1 minute from now"],[3600,G_cp_("LOCALE_MINUTES"),60],[7200,G_cp_("LOCALE_1_HOUR_AGO"),
"1 hour from now"],[86400,G_cp_("LOCALE_HOURS"),3600],[172800,G_cp_("LOCALE_YESTERDAY"),"Tomorrow"],[604800,G_cp_("LOCALE_DAYS"),86400],[1209600,G_cp_("LOCALE_LAST_WEEK"),"Next week"],[2419200,G_cp_("LOCALE_WEEKS"),604800]],m=(+new Date-m)/1E3;if(1>=Math.floor(m))f=G_cp_("LOCALE_NOW");else{for(var u=0,k;void 0!=(k=t[u++]);)if(m<k[0]){f="string"==typeof k[2]?k[1]:Math.floor(m/k[2])+" "+k[1]+" "+G_cp_("LOCALE_AGO");break a}f=("0"+f.getDate()).slice(-2)+"/"+("0"+(f.getMonth()+1)).slice(-2)+"/"+f.getFullYear()+
" "+("0"+f.getHours()).slice(-2)+":"+("0"+f.getMinutes()).slice(-2)}}b={"[download_id]":p,"[message]":h,"[file_conversion_part]":n,"[filename]":e,"[progress]":q,"[progress_span_class]":d,"[download_time]":f,"[file_action_link]":c,"[file_icon]":g,"[rightside_img]":"","[cancel_button_class]":b.show_cancel?"flatNotifCancelImage":"hidden"};c='<div class="flatNotif">\t<div class="flatNotifHeader">\t\t<span class="flatNotifDownloadTime">[download_time]</span>\t\t<div class="flatNotifHeader_after">&nbsp;</div>\t</div>\t<div class="flatNotifBody clear-fix">\t\t<div class="flatNotifFileTypeDiv">\t\t\t<img class="flatNotifFileTypeIcon" src="[file_icon]" id="icon[download_id]" alt="File type icon" />\t\t</div>\t\t<div class="flatNotifFileInfoDiv clear-fix">\t\t\t<span id="file[download_id]" class="flatNotifFileName">[filename]</span>\t\t\t<span class="[progress_span_class]">\t\t\t\t<img class="[cancel_button_class]" src="icons/cancel_download.png" id="cancel[download_id]" alt="Cancel" />\t\t\t\t<div class="flatProgressBar">\t\t\t\t\t<div class="flatProgressBarOnProgress" style="width:[progress]%">&nbsp;</div>\t\t\t\t\t&nbsp;\t\t\t\t</div>\t\t\t</span>\t\t\t<span class="flatNotifFileStatus">[message]</span>\t\t\t[file_action_link]\t\t\t[file_conversion_part]\t\t</div>\t\t<div class="flatNotifRightSideDiv">\t\t\t[rightside_img]\t\t</div>\t</div></div>';
for(var r in b)g=new RegExp(r.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g"),c=c.replace(g,b[r]);return c}
function G_cp_z(b,c){for(var d=0;d<G_cp_v.length;d++){var e=G_cp_v[d];if(e.download_id==b){void 0!==c&&(e.showMoreExpanderOpened=c);e.showMoreExpanderOpened?(document.getElementById("showMoreExpander"+b).style.display="none",document.getElementById("showMoreExpanderOpen"+b).style.display="inherit"):(document.getElementById("showMoreExpander"+b).style.display="inherit",document.getElementById("showMoreExpanderOpen"+b).style.display="none");break}}}
function G_cp_A(b){var c=b.file_local_path,d=b.download_id;return G_cp_n()||G_cp_f()===G_cp_i.firefox_legacy?function(){G_cp_d({command:"create_tab",url:c});return!1}:G_cp_m()?function(){G_cp_d({command:"open_file",downloadId:d});return!1}:function(){return!1}}
function G_cp_B(){if(G_cp_u||G_cp_v){var b="",c;for(c in G_cp_v)b=G_cp_y(G_cp_v[c])+b;for(var d in G_cp_u)b=G_cp_y(G_cp_u[d])+b;""==b&&(b=G_cp_C,document.getElementsByTagName("BODY")[0].style.height=160);document.getElementById("notifs")&&(document.getElementById("notifs").innerHTML=b+"<br>");for(var e in G_cp_u)(b=G_cp_u[e].id)&&document.getElementById("cancel"+b)&&(document.getElementById("cancel"+b).onclick=function(){G_cp_d({command:"cancel",notifId:this.id.substring(6)})});for(var g in G_cp_v){e=
G_cp_v[g];b=e.download_id;try{b&&(document.getElementById("open"+b)&&(document.getElementById("open"+b).onclick=G_cp_A(e)),100!=e.progress||"extracted_pdf"!=e.tex_state&&"extracted_cleaned"!=e.tex_state||(G_cp_z(b),document.getElementById("showMoreExpander"+b).onclick=function(){G_cp_z(this.id.substring(16),!0)},document.getElementById("showLessExpander"+b).onclick=function(){G_cp_z(this.id.substring(16),!1)}),"blocked"!=e.orig_file_state&&(document.getElementById("icon"+b).onclick=G_cp_A(e)),"show"==
G_cp_v[g].orig_file_state?document.getElementById("orig"+b).onclick=function(){G_cp_d({command:"get_orig",downloadId:this.id.substring(4)})}:"inactive_pending"==G_cp_v[g].orig_file_state?document.getElementById("orig"+b).onclick=function(){G_cp_d({command:"get_orig",downloadId:this.id.substring(4)});G_cp_B()}:"retry_enabled"==G_cp_v[g].orig_file_state&&(document.getElementById("retry"+b).onclick=function(){G_cp_d({command:"retry_get_orig",downloadId:this.id.substring(5)})}))}catch(n){console.log(n.toString())}}}}
function G_cp_D(){G_cp_d({command:"get_notifications"});document.getElementById("clear_downloads").onclick=function(){G_cp_d({command:"clear_downloads"})};document.getElementById("collect_logs").onclick=function(){G_cp_d({command:"collect_logs"})};document.getElementById("report_incident").onclick=function(){G_cp_d({command:"report_incident"})};document.getElementById("open_options").onclick=function(){G_cp_d({command:"open_options"})};G_cp_o();G_cp_E=document.getElementById("notifs").innerHTML;G_cp_C=
G_cp_E.replace(G_cp_("LOCALE_LOADING"),G_cp_("LOCALE_NO_DOWNLOADS_FOUND"));G_cp_C=G_cp_C.replace("padding-left: 155px","padding-left: 115px")}var G_cp_F,G_cp_C,G_cp_E;
function G_cp_G(){G_cp_b(function(b){switch(b.command){case "get_notifications_response":b.options_disabled||(document.getElementById("popup_settings_div").style.display="block");b.show_urlf&&$(".K12").css("display","block");G_cp_w=b.block_get_original;G_cp_u=b.notifications_map;G_cp_v=b.notifications_array;G_cp_B();G_cp_F&&clearInterval(G_cp_F);G_cp_F=setInterval(G_cp_B,2E3);break;case "notification":if(b.notification){if(100==b.notification.progress){var c=!1,d;for(d in G_cp_v)if(G_cp_v[d].id===
b.notification.id){G_cp_v[d]=b.notification;c=!0;break}c||G_cp_v.push(b.notification)}100==b.notification.progress||0==b.notification.progress?delete G_cp_u[b.notification.id]:void 0!==b.notification.progress&&(G_cp_u[b.notification.id]=b.notification);G_cp_B()}}});G_cp_D()}"undefined"!=typeof window&&"undefined"===typeof window.addEventListener?document.detachEvent("onDOMContentLoaded",G_cp_G):document.removeEventListener("DOMContentLoaded",G_cp_G,void 0);
"undefined"!=typeof window&&"undefined"===typeof window.addEventListener?document.attachEvent("onDOMContentLoaded",G_cp_G):document.addEventListener("DOMContentLoaded",G_cp_G,void 0);
